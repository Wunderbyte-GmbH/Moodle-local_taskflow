{"version":3,"file":"uploadusers.min.js","sources":["../src/uploadusers.js"],"sourcesContent":["/**\n * JS for handling the upload users modal in a form.\n *\n * @module local_taskflow/uploadusers\n * @copyright 2025\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Notification from 'core/notification';\nimport ModalForm from 'core_form/modalform';\n\n/**\n * Initializes the upload users modal trigger.\n *\n * Attaches a click event listener to the element with ID 'openuploadusersmodal',\n * which opens a modal form for uploading users and shows a success notification\n * upon form submission.\n */\nexport const init = () => {\n    const trigger = document.querySelector('#openuploadusersmodal');\n    if (!trigger) {\n        return;\n    }\n\n    trigger.addEventListener('click', () => {\n        const modal = new ModalForm({\n            formClass: 'local_taskflow\\\\form\\\\uploaduser',\n            modalConfig: {\n                title: 'Upload Users (JSON)',\n            }\n        });\n\n        modal.addEventListener(modal.events.FORM_SUBMITTED, function(e) {\n            // eslint-disable-next-line no-console\n            console.log('worked', e.detail);\n            Notification.addNotification({\n                message: 'Your upload was successful! ' + e.detail.time,\n                type: 'success',\n                closeButton: true,\n            });\n\n            setTimeout(() => {\n                window.location.href = window.location.origin + window.location.pathname;\n            }, 5000);\n        });\n\n        modal.show();\n    });\n};\n"],"names":["trigger","document","querySelector","addEventListener","modal","ModalForm","formClass","modalConfig","title","events","FORM_SUBMITTED","e","console","log","detail","addNotification","message","time","type","closeButton","setTimeout","window","location","href","origin","pathname","show"],"mappings":";;;;;;;kMAkBoB,WACVA,QAAUC,SAASC,cAAc,yBAClCF,SAILA,QAAQG,iBAAiB,SAAS,WACxBC,MAAQ,IAAIC,mBAAU,CACxBC,UAAW,mCACXC,YAAa,CACTC,MAAO,yBAIfJ,MAAMD,iBAAiBC,MAAMK,OAAOC,gBAAgB,SAASC,GAEzDC,QAAQC,IAAI,SAAUF,EAAEG,8BACXC,gBAAgB,CACzBC,QAAS,+BAAiCL,EAAEG,OAAOG,KACnDC,KAAM,UACNC,aAAa,IAGjBC,YAAW,KACPC,OAAOC,SAASC,KAAOF,OAAOC,SAASE,OAASH,OAAOC,SAASG,WACjE,QAGPrB,MAAMsB"}